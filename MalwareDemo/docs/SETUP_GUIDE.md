# üöÄ Complete Setup Guide

## Android Malware Security Demo - Installation & Configuration

This guide provides comprehensive step-by-step instructions for setting up the complete Android Security Research Demo environment.

## üìã System Requirements

### Minimum Requirements
- **OS**: Windows 10+, macOS 10.15+, or Ubuntu 18.04+
- **RAM**: 8GB (16GB recommended for emulator)
- **Storage**: 20GB free disk space
- **CPU**: Intel i5 or AMD equivalent
- **Network**: Stable internet connection

### Recommended Development Setup
- **RAM**: 16GB+ for smooth emulator performance
- **Storage**: SSD with 50GB+ free space
- **CPU**: Intel i7/AMD Ryzen 7 or better
- **Graphics**: Dedicated GPU for hardware acceleration

## üõ†Ô∏è Software Prerequisites

### 1. Java Development Kit (JDK)
```bash
# Check if JDK is installed
java -version
javac -version

# Install JDK 11 if needed
# Windows/macOS: Download from Oracle or OpenJDK
# Ubuntu:
sudo apt update
sudo apt install openjdk-11-jdk
```

### 2. Android Studio
```bash
# Download from: https://developer.android.com/studio
# Install with these components:
# - Android SDK
# - Android SDK Platform-Tools  
# - Android SDK Build-Tools
# - Android Emulator
# - Intel x86 Emulator Accelerator (HAXM)
```

### 3. Python (for C2 Server)
```bash
# Check Python version
python3 --version

# Install Python 3.8+ if needed
# Windows: Download from python.org
# macOS: brew install python3
# Ubuntu: sudo apt install python3 python3-pip
```

### 4. Git Version Control
```bash
# Check Git installation
git --version

# Install if needed
# Windows: Download from git-scm.com
# macOS: brew install git
# Ubuntu: sudo apt install git
```

## üì± Android Device Setup

### Option A: Physical Android Device

#### Enable Developer Options
1. Open **Settings** ‚Üí **About phone**
2. Tap **Build number** 7 times rapidly
3. Enter device passcode when prompted
4. Developer options now available in Settings

#### Enable USB Debugging
1. Go to **Settings** ‚Üí **Developer options**
2. Enable **USB debugging**
3. Connect device via USB cable
4. Accept debugging authorization on device

#### Recommended Developer Settings
```
Developer Options:
‚úÖ USB debugging
‚úÖ Install via USB  
‚úÖ USB debugging (Security settings)
‚úÖ Verify apps over USB
‚ö†Ô∏è OEM unlocking (only if needed)
```

### Option B: Android Emulator

#### Create Virtual Device
1. Open Android Studio
2. Tools ‚Üí AVD Manager ‚Üí Create Virtual Device
3. **Recommended Configuration**:
   - **Device**: Pixel 6 Pro
   - **API Level**: 30+ (Android 11+)
   - **Target**: Google APIs (not Google Play)
   - **RAM**: 4GB+
   - **Internal Storage**: 8GB+
   - **Graphics**: Hardware - GLES 2.0

#### Emulator Performance Optimization
```bash
# Windows - Enable Hyper-V or HAXM
# Check: Control Panel ‚Üí Programs ‚Üí Windows Features
# Enable: Hyper-V or Intel HAXM

# macOS - No additional setup needed
# Linux - Install KVM acceleration
sudo apt install qemu-kvm libvirt-daemon-system
sudo usermod -a -G kvm $USER
```

## üìÇ Project Installation

### Step 1: Clone Repository
```bash
# Create development directory
mkdir ~/android-security
cd ~/android-security

# Clone project (replace with actual repository URL)
git clone https://github.com/your-org/android-security-demo.git
cd android-security-demo

# Verify project structure
ls -la
```

### Step 2: Android Studio Setup
```bash
# Launch Android Studio
# Select: Open an existing Android Studio project
# Navigate to: android-security-demo/MalwareDemo
# Wait for initial Gradle sync (may take several minutes)
```

### Step 3: Resolve Dependencies
```bash
# If Gradle sync fails, try:
# 1. File ‚Üí Invalidate Caches and Restart
# 2. Build ‚Üí Clean Project
# 3. Build ‚Üí Rebuild Project

# Update SDK if prompted:
# Tools ‚Üí SDK Manager ‚Üí Install missing components
```

### Step 4: Build Configuration
```gradle
// Verify build.gradle (app) settings:
android {
    compileSdk 34
    
    defaultConfig {
        minSdk 21
        targetSdk 34
        // ... other settings
    }
}
```

## üåê C2 Server Installation

### Step 1: Python Environment Setup
```bash
# Navigate to C2 server directory
cd MalwareDemo/C2Server

# Create virtual environment (recommended)
python3 -m venv venv

# Activate virtual environment
# Linux/macOS:
source venv/bin/activate
# Windows:
venv\Scripts\activate
```

### Step 2: Install Dependencies
```bash
# Install required packages
pip install -r requirements.txt

# Verify installation
pip list
```

### Step 3: Server Configuration
```python
# Edit server.py if needed for configuration:
HOST = '127.0.0.1'  # Localhost for testing
PORT = 5000         # Default port
DEBUG = True        # Enable for development
```

### Step 4: Test Server
```bash
# Start the C2 server
python server.py

# Verify in browser: http://localhost:5000
# Should see C2 dashboard interface
```

## üîß Initial Configuration

### Android App Configuration

#### 1. App Permissions Setup
```xml
<!-- Verify AndroidManifest.xml has required permissions -->
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<!-- ... other permissions as needed -->
```

#### 2. Network Security Configuration
```xml
<!-- For HTTP connections to localhost C2 server -->
<application
    android:networkSecurityConfig="@xml/network_security_config"
    ... >
```

#### 3. Build and Install
```bash
# In Android Studio:
# 1. Connect device or start emulator
# 2. Click Run (green arrow) or Ctrl+R
# 3. Select target device
# 4. Wait for installation and launch
```

### C2 Server Configuration

#### 1. Network Configuration
```bash
# For local testing, default settings work
# For network testing, modify server.py:
HOST = '0.0.0.0'  # Accept connections from any IP
PORT = 5000       # Or choose different port
```

#### 2. Firewall Configuration
```bash
# Windows Firewall
# Allow Python through Windows Firewall when prompted

# macOS Firewall  
# System Preferences ‚Üí Security & Privacy ‚Üí Firewall
# Allow incoming connections for Python

# Linux (ufw)
sudo ufw allow 5000/tcp
```

## ‚úÖ Installation Verification

### Test Android Application

#### 1. App Launch Test
```bash
# Verify app opens without crashes
# Check: Main activity loads with all demo buttons
# Expected: No force closes or ANR errors
```

#### 2. Permission Grant Test
```bash
# Test permission requests
# Grant: Required permissions when prompted
# Verify: App functions with permissions granted
```

#### 3. Basic Functionality Test
```bash
# Test each demo category:
# 1. Reverse Shell Demo ‚Üí Should show connection interface
# 2. Data Exfiltration ‚Üí Should display data collection UI
# 3. Keylogger Demo ‚Üí Should request accessibility permissions
# 4. Social Engineering ‚Üí Should show manipulation demos
# 5. Security Scanner ‚Üí Should perform threat detection
```

### Test C2 Server

#### 1. Web Interface Test
```bash
# Open browser: http://localhost:5000
# Expected: Dashboard loads without errors
# Check: All navigation links work
# Verify: Templates render correctly
```

#### 2. API Endpoint Test
```bash
# Test device registration endpoint
curl -X POST http://localhost:5000/api/register \
  -H "Content-Type: application/json" \
  -d '{"device_id": "test", "device_info": "test_device"}'

# Expected: Success response from server
```

#### 3. Real-time Communication Test
```bash
# In app: Enable C2 communication
# In browser: Check dashboard for device registration
# Expected: Device appears in C2 interface
```

### Test Integration

#### 1. App-to-C2 Communication
```bash
# Android App: Start C2 communication service
# C2 Dashboard: Verify device registration
# Expected: Real-time data transmission
```

#### 2. Security Scanner Test
```bash
# Run comprehensive security scan
# Expected: Detects all active malware components
# Verify: Risk score and recommendations provided
```

## üêõ Troubleshooting Guide

### Common Android Issues

#### Build Failures
```bash
# Gradle sync issues:
# 1. File ‚Üí Invalidate Caches and Restart
# 2. Check internet connection
# 3. Update Android Gradle Plugin
# 4. Sync Project with Gradle Files

# SDK issues:
# 1. Tools ‚Üí SDK Manager
# 2. Install missing SDK platforms
# 3. Update build tools to latest version
```

#### Runtime Errors
```bash
# App crashes on launch:
# 1. Check logcat for error messages
# 2. Verify all dependencies installed
# 3. Check device/emulator compatibility
# 4. Clear app data and reinstall

# Permission issues:
# 1. Manually grant permissions in Settings
# 2. Check AndroidManifest.xml permission declarations
# 3. Verify targetSdkVersion compatibility
```

#### Emulator Issues
```bash
# Slow performance:
# 1. Increase RAM allocation
# 2. Enable hardware acceleration
# 3. Close unnecessary applications
# 4. Use x86_64 system images

# Network connectivity:
# 1. Check emulator network settings
# 2. Verify host firewall configuration
# 3. Test with different emulator configuration
```

### Common C2 Server Issues

#### Server Won't Start
```bash
# Port already in use:
# 1. Change port in server.py
# 2. Kill existing processes: lsof -i :5000
# 3. Use different port: python server.py --port 8080

# Module import errors:
# 1. Verify virtual environment activated
# 2. Reinstall requirements: pip install -r requirements.txt
# 3. Check Python version compatibility
```

#### Connection Issues
```bash
# Can't access web interface:
# 1. Check server is running: netstat -an | grep 5000
# 2. Try different browser
# 3. Clear browser cache
# 4. Check firewall settings

# App can't connect to server:
# 1. Verify server IP/port in app
# 2. Check network connectivity
# 3. Test with curl or postman
# 4. Review server logs for errors
```

## üîí Security Considerations

### Development Environment Security

#### Isolation Recommendations
```bash
# Use dedicated test devices
# Create isolated network environment
# Regular backup of development machines
# Monitor system resources during testing
```

#### Safe Testing Practices
```bash
# Never test on production devices
# Document all testing activities
# Have rollback procedures ready
# Monitor for unexpected behavior
```

### Post-Installation Security

#### Cleanup Procedures
```bash
# After testing:
# 1. Run security scanner
# 2. Revoke all app permissions
# 3. Uninstall test applications
# 4. Clear app data and cache
# 5. Consider factory reset for thorough cleanup
```

#### Monitoring Recommendations
```bash
# Monitor system behavior:
# 1. Check running processes regularly
# 2. Monitor network connections
# 3. Watch for unusual battery drain
# 4. Review app permissions periodically
```

## üìû Getting Help

### Self-Help Resources
- **Documentation**: Check docs/ directory for detailed guides
- **Logs**: Review Android logcat and C2 server logs
- **GitHub Issues**: Search existing issues for solutions
- **Community Forums**: Security research communities

### Reporting Issues
- **Bug Reports**: Use GitHub issue templates
- **Security Concerns**: Contact maintainers privately
- **Feature Requests**: Submit via GitHub discussions
- **Documentation Issues**: Submit pull requests

---

**Next Steps**: After successful installation, refer to the [User Manual](USER_MANUAL.md) for detailed usage instructions and [Security Guide](SECURITY_GUIDE.md) for safe testing practices.
