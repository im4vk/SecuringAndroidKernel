#!/bin/bash

# Security Demo: C2 Server Startup Script
# FOR EDUCATIONAL PURPOSES ONLY

echo "ğŸš¨ SECURITY DEMO: Command & Control Server"
echo "âš ï¸  FOR EDUCATIONAL PURPOSES ONLY"
echo "=====================================\n"

# Check if Python is installed
if ! command -v python3 &> /dev/null; then
    echo "âŒ Python 3 is required but not installed."
    echo "Please install Python 3 and try again."
    exit 1
fi

# Check if virtual environment exists
if [ ! -d "venv" ]; then
    echo "ğŸ“¦ Creating virtual environment..."
    python3 -m venv venv
fi

# Activate virtual environment
echo "ğŸ”§ Activating virtual environment..."
source venv/bin/activate

# Install requirements
echo "ğŸ“¥ Installing dependencies..."
pip install -r requirements.txt

# Create necessary directories
mkdir -p static/css
mkdir -p static/js
mkdir -p static/img

# Display startup information
echo "\nğŸš€ Starting C2 Server..."
echo "ğŸ“Š Dashboard URL: http://localhost:5000"
echo "ğŸ“± Android API: http://localhost:5000/api/android/"
echo "ğŸ” Device Management: http://localhost:5000/devices"
echo "ğŸ’¾ Data Viewer: http://localhost:5000/data"
echo "ğŸ‘ï¸  Surveillance: http://localhost:5000/surveillance"
echo "\nâš ï¸  WARNING: This server demonstrates real malware C2 techniques"
echo "   Only use for educational purposes and security research"
echo "\nğŸ›¡ï¸  DEFENSIVE NOTE: This shows what to detect and block"
echo "   Monitor for these patterns in your network security"

echo "\nğŸ¯ DEMO SETUP INSTRUCTIONS:"
echo "1. Start this C2 server"
echo "2. Note your computer's IP address (use 'ifconfig' or 'ipconfig')"
echo "3. Update the IP in Android app's C2CommunicationService.kt"
echo "4. Install and run the Android malware demo app"
echo "5. Watch the dashboard for device connections and data"

echo "\nPress Ctrl+C to stop the server"
echo "=================================="

# Start the Flask server
python server.py
